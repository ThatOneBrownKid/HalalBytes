<div class="image-container" style="position: relative; width: 100%; height: 40vh; overflow: hidden;">
  <% if @restaurant.images.attached? %>
    <%= image_tag @restaurant.images.first.variant(resize_to_fill: [1000, 200]), class: "card-img", alt: "Restaurant Image", style: "object-fit: cover; width: 100%; height: 100%;" %>
  <% else %>
    <%= image_tag "default-restaurant-image.jpg", class: "card-img", alt: "Restaurant Image", style: "object-fit: cover; width: 100%; height: 100%;" %> 
  <% end %>
  <div class="restaurant-info" style="position: absolute; bottom: 30px; left: 10px;">
    <div class="restaurant-name" style="color: white; font-size: 40px; font-weight: bold;">
      <%= @restaurant.name %>
    </div>
    <div class="restaurant-rating d-inline" style="font-size: 20px; font-weight: bold;">
        <% @restaurant.overall_rating.to_i.times do%>
          <i class="bi bi-star-fill red"></i>
        <% end %>   
        <% (5-@restaurant.overall_rating.to_i).times do%>
          <i class="bi bi-star-fill gray"></i>
        <% end %>
        <div class="d-inline text-white">
          <%=@restaurant.overall_rating%>
          <i class="bi bi-dot"></i>
        </div>
        <div class="restaurant-open-close d-inline" style="font-size: 20px; font-weight: bold;">
          <% if @restaurant.open? %>
            <span style="color: green;">Open</span>
          <% else %>
            <span style="color: red;">Closed</span>
          <% end %>
        </div>
    </div>
  </div>
</div>

<div class="container-fluid p-3">
  <div class="row">
    <div class="col-md-3">
      <div class="rounded p-3 border">
        <div class="d-block text-black" id="Resturant Address">
          <p class="d-inline" style="font-weight: bold;"> Address: </p> 
          <%=@restaurant.address%>
        </div>
        <div class="d-block text-black" id="Resturant Address">
          <p class="d-inline" style="font-weight: bold;"> Hours: </p> 
          <span class="current-label" id="current-day" style="font-style: italic;"></span>
          <span> <%= @restaurant.hours(Time.now.strftime("%A").downcase) %></span>
          <span class="dropdown" onclick="toggleHours()"> 
            <i id="dropdown-icon" class="bi bi-caret-down-fill"></i> 
          </span>
          <div class="d-block text-black d-none" id="RestaurantHours">
            <div class="d-block text-black">
              <span class="day-label">Sunday:</span>
              <span class="hours"><%= @restaurant.hours("Sunday") %></span>
            </div>
            <div class="d-block text-black">
              <span class="day-label">Monday:</span>
              <span class="hours"><%= @restaurant.hours("Monday") %></span>
            </div>
            <div class="d-block text-black">
              <span class="day-label">Tuesday:</span>
              <span class="hours"><%= @restaurant.hours("Tuesday") %></span>
            </div>
            <div class="d-block text-black">
              <span class="day-label">Wednesday:</span>
              <span class="hours"><%= @restaurant.hours("Wednesday") %></span>
            </div>
            <div class="d-block text-black">
              <span class="day-label">Thursday:</span>
              <span class="hours"><%= @restaurant.hours("Thursday") %></span>
            </div>
            <div class="d-block text-black">
              <span class="day-label">Friday:</span>
              <span class="hours"><%= @restaurant.hours("Friday") %></span>
            </div>
            <div class="d-block text-black">
              <span class="day-label">Saturday:</span>
              <span class="hours"><%= @restaurant.hours("Saturday") %></span>
            </div>
          </div>



      </div>
    </div>
  </div>
</div>


<style>
.star-rating {
  font-size: 50px;
}

.star {
  display: inline-block;
  font-size: inherit;
  color: #FFFFFF; /* Default star color */
}

.star.filled {
  color: #FFAC2D; /* Filled star color */
}

.red{
  color: #DC3545;
}

.gray{
  color: #D3D3D3;
}

.dropdown {
  display: inline-block;
  width: 20px; 
  text-align: right;
  margin-right: 10px; 
  cursor: pointer;
}

.current-label {
  display: inline-block;
  width: 66px; 
  text-align: right;
  margin-right: 10px; 

}

.day-label {
  display: inline-block;
  width: 120px; 
  text-align: right;
  margin-right: 10px;
}

.hours {
  display: inline-block;
}
</style>



<style>
  /* CSS to add fade-in animation */
  .day-label,
  .hours {
    opacity: 0; /* Start with 0 opacity */
    transition: opacity 0.5s ease; /* Add a transition effect */
  }

  /* Apply the animation to each row individually */
  .day-label:nth-child(1),
  .hours:nth-child(1) {
    animation: fadeIn 0.5s ease 0.5s 1 normal forwards;
  }

  .day-label:nth-child(2),
  .hours:nth-child(2) {
    animation: fadeIn 0.5s ease 1s 1 normal forwards;
  }

  /* Repeat for other rows, adjusting the delay as needed */
</style>

<script>
    // Function to toggle the icon, div visibility, and apply animation
    function toggleHours() {
      const icon = document.getElementById("dropdown-icon");
      const hoursDiv = document.getElementById("RestaurantHours");

      if (icon.classList.contains("bi-caret-down-fill")) {
        // Toggle to left icon
        icon.classList.remove("bi-caret-down-fill");
        icon.classList.add("bi-caret-left-fill");

        // Toggle the visibility of the div
        hoursDiv.classList.remove("d-none");

        // Trigger animation for each row
        const dayLabels = hoursDiv.querySelectorAll(".day-label");
        const hoursSpans = hoursDiv.querySelectorAll(".hours");

        dayLabels.forEach((label, index) => {
          setTimeout(() => {
            label.style.opacity = "1";
            hoursSpans[index].style.opacity = "1";
          }, 10 * index); // Adjust the delay as needed
        });
      } else {
        // Toggle to down icon, hide div, and reset opacity
        icon.classList.remove("bi-caret-left-fill");
        icon.classList.add("bi-caret-down-fill");

        // Toggle the visibility of the div
        hoursDiv.classList.add("d-none");

        // Reset opacity to 0 for all rows
        const dayLabels = hoursDiv.querySelectorAll(".day-label");
        const hoursSpans = hoursDiv.querySelectorAll(".hours");

        dayLabels.forEach((label) => {
          label.style.opacity = "0";
        });

        hoursSpans.forEach((hours) => {
          hours.style.opacity = "0";
        });
      }
    }
  </script>
<script>
  const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
  const currentDayIndex = new Date().getDay();
  const currentDayName = daysOfWeek[currentDayIndex];
  const currentDayWithColon = currentDayName + ":";

  const currentDayElement = document.getElementById("current-day");
  currentDayElement.textContent = currentDayWithColon;
</script>

